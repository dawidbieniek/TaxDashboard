@page "/calculator"
@using ApexCharts
@using TaxDashboard.Components.Pages.Calculator.Components

<MudStack Class="pa-2">
    <MudContainer MaxWidth="MaxWidth.Small">
        <MudCard Class="compact-card" Elevation="4">
            <MudCardContent>
                <MudStack Spacing="3">
                    <MudNumericField Label="Przychody" @bind-Value="_calculationData.Income" For="@(() => _calculationData.Income)" Format="C2" T="decimal" Immediate="false" Required />
                    <MudNumericField Label="Koszty" @bind-Value="_calculationData.Expenses" For="@(() => _calculationData.Expenses)" Format="C2" T="decimal" Immediate="false" Required />
                    <MudNumericField Label="Stawka" @bind-Value="_calculationData.Rate" For="@(() => _calculationData.Rate)" Format="C2" T="decimal" Immediate="false" Required />
                    <MudSelect Label="Składka społeczna" @bind-Value="_calculationData.ContributionVariant" Required>
                        @foreach (var variant in Enum.GetValues<ContributionVariant>())
                        {
                            <MudSelectItem Value="@variant">@variant.GetDescriptor()</MudSelectItem>
                        }
                    </MudSelect>
                </MudStack>
            </MudCardContent>
        </MudCard>
    </MudContainer>
    <MudGrid>
        <MudItem xs="4">
            <MudCard Class="compact-card" Elevation="4">
                <MudCardHeader>
                    <MudText Typo="Typo.h6">Ryczałt</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <CalculatorChart TaxValue="10" HealthContributionValue="20" SocialContributionValue="30" />
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="4">
            <MudCard Class="compact-card" Elevation="4">
                <MudCardHeader>
                    <MudText Typo="Typo.h6">Skala podatkowa</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <CalculatorChart TaxValue="10" HealthContributionValue="20" SocialContributionValue="30" />
                </MudCardContent>
            </MudCard>
        </MudItem>
        <MudItem xs="4">
            <MudCard Class="compact-card" Elevation="4">
                <MudCardHeader>
                    <MudText Typo="Typo.h6">Podatek liniowy</MudText>
                </MudCardHeader>
                <MudCardContent>
                    <CalculatorChart TaxValue="10" HealthContributionValue="20" SocialContributionValue="30" />
                </MudCardContent>
            </MudCard>
        </MudItem>
    </MudGrid>
</MudStack>

@code {
    private CalculationData _calculationData = new();
}
